@{
    ViewData["Title"] = "Home Page";
}

<div id="userInfo" style="display:none;">
    <p>Добро пожаловать <span id="userName"></span>!</p>
    <input type="button" value="Выйти" id="logOut" />
</div>
<div id="loginForm">
    <h3>Вход на сайт</h3>
    <p>
        <label for="token">Введите токен</label><br />
        <input type="text" id="token" />
    </p>
</div>
<p>
    <input type="submit" id="getTodos" value="Получить список" />
</p>
<script>
    const tokenKey = "accessToken";

    // кнопка для обращения по пути "/todo" для получения задач пользователя
    document.getElementById("getTodos").addEventListener("click", async e => {
        e.preventDefault();
        const userId = 1; // замените на ваш способ получения userId

        let token = sessionStorage.getItem(tokenKey);
        if(token == null)
            token = document.getElementById("token").value;

        const response = await fetch(`/todo?userId=${userId}`, {
            method: "GET",
            headers: {
                "Accept": "application/json",
                "Authorization": "Bearer " + token
            }
        });

        if (response.ok === true) {
            const todos = await response.json();
            console.log("User Todos:", todos);

        } else {
            console.log("Status: ", response.status);
        }
    });

    // условный выход - просто удаляем токен и меняем видимость блоков
    document.getElementById("logOut").addEventListener("click", e => {

        e.preventDefault();
        document.getElementById("userName").innerText = "";
        document.getElementById("userInfo").style.display = "none";
        document.getElementById("loginForm").style.display = "block";
        sessionStorage.removeItem(tokenKey);
    });
</script>